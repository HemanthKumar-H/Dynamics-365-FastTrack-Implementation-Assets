{"$schema":"https://dataexplorer.azure.com/static/d/schema/60/dashboard.json","id":"2655c32c-56ce-4943-b32b-be2a03d29404","eTag":"fc9dfdb4-a7f5-4579-a221-955cf386e3fa","schema_version":"60","title":"Power Automate Monitoring","pagesNavWidth":340,"tiles":[{"id":"255d3ab5-9994-46b0-bf23-57d5ce5ca2b5","title":"Flow Executions ","description":"Get all flows executed during time window ","visualType":"table","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":0,"y":0,"width":19,"height":7},"queryRef":{"kind":"query","queryId":"93aadea8-8578-4253-a27b-cbae95ee897b"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"1d23eb8b-09b6-4f50-a24b-6affded6a087","title":"Flow Runs","description":"Get number of runs for specific flow id. ","visualType":"table","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":0,"y":30,"width":8,"height":6},"queryRef":{"kind":"query","queryId":"5b09dbcb-b32c-4288-874c-491dc7c02ec8"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"5e077831-8887-4f34-99f1-82b257181b2d","title":"Flow actions of specific Run","visualType":"timechart","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":8,"y":30,"width":11,"height":6},"queryRef":{"kind":"query","queryId":"78103155-bde5-41b3-94ff-ef4f7504445c"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":"name","yColumns":["duration"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"48a17e41-4d08-4977-809b-1f02dcb0c667","title":"Flows Execution Status ","visualType":"multistat","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":7,"y":7,"width":12,"height":6},"queryRef":{"kind":"query","queryId":"4912c0e5-cdb6-44fc-9ba1-f7159e6e53ff"},"visualOptions":{"multiStat__textSize":"auto","multiStat__valueColumn":null,"colorRulesDisabled":true,"colorStyle":"light","multiStat__displayOrientation":"horizontal","multiStat__labelColumn":null,"multiStat__slot":{"width":4,"height":2},"colorRules":[]}},{"id":"50f8f520-c239-4531-bd5b-b3d99a2b314a","title":"Type of Flows","visualType":"pie","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":0,"y":7,"width":7,"height":6},"queryRef":{"kind":"query","queryId":"8c9c7ba9-08b2-4676-8282-266d468d587b"},"visualOptions":{"hideLegend":false,"legendLocation":"bottom","xColumn":null,"yColumns":null,"seriesColumns":null,"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","pie__topNSlices":null,"crossFilter":[],"drillthrough":[]}},{"id":"5adb26a8-e05d-48c5-9807-a035fcef42f9","title":"Weekly Execution ","visualType":"column","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":0,"y":13,"width":8,"height":7},"queryRef":{"kind":"query","queryId":"8dd68bcb-814e-4bc0-abc5-bcf12b3971b8"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"54d77520-8ad4-4a09-aa3c-9212f5397d59","title":"Monthly Execution ","visualType":"column","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":8,"y":13,"width":11,"height":7},"queryRef":{"kind":"query","queryId":"4c01e625-4b05-4610-b848-9650f36b1986"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"41c7cc1e-f81d-41e3-960f-93c56372a6c9","title":"Number of actions on the selected Run","visualType":"table","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":0,"y":43,"width":11,"height":7},"queryRef":{"kind":"query","queryId":"ff8c55ad-f58d-4960-8e0f-599ddcd85a25"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"972c250d-d257-4ee6-86f0-674d7510e0ea","title":"Actions Statistics","visualType":"pie","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":11,"y":43,"width":8,"height":7},"queryRef":{"kind":"query","queryId":"59cad399-adaf-4b43-bc3f-2a16bd3136d1"},"visualOptions":{"hideLegend":false,"legendLocation":"bottom","xColumn":null,"yColumns":null,"seriesColumns":null,"crossFilterDisabled":false,"drillthroughDisabled":false,"labelDisabled":false,"pie__label":["name","percentage"],"tooltipDisabled":false,"pie__tooltip":["name","percentage","value"],"pie__orderBy":"size","pie__kind":"pie","pie__topNSlices":null,"crossFilter":[],"drillthrough":[]}},{"id":"b638d63e-8579-4204-b69f-d5f8c8cbcb9c","title":"Most problematic Flows","visualType":"table","pageId":"bcf7dbb2-ca0b-46ba-933d-f526c4d0b804","layout":{"x":0,"y":0,"width":20,"height":5},"queryRef":{"kind":"query","queryId":"e497200f-72de-4485-acf6-711056ef02b1"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"cd09cb84-d73d-4047-b39a-38d094a4d214","title":"Most problematic actions","visualType":"table","pageId":"bcf7dbb2-ca0b-46ba-933d-f526c4d0b804","layout":{"x":11,"y":5,"width":9,"height":10},"queryRef":{"kind":"query","queryId":"6857dbf5-960c-4721-909e-38eb5a226766"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"31440838-d212-4022-96f5-a4585e29a44a","title":"Flow Triggers","visualType":"table","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":0,"y":36,"width":19,"height":7},"queryRef":{"kind":"query","queryId":"b54ed617-ab9a-46e1-a82b-10738a38fa54"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"d82b0e61-c9d1-4eb1-8233-f1bed22adc73","title":"Failed Triggers","visualType":"table","pageId":"bcf7dbb2-ca0b-46ba-933d-f526c4d0b804","layout":{"x":0,"y":5,"width":11,"height":10},"queryRef":{"kind":"query","queryId":"19d401d7-01c8-409d-bc98-71cd25eef601"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"4e19e82e-fc91-4734-ad9e-ae5b38a21177","title":"30 Days Flow Success and Failrues ","visualType":"stackedcolumn","pageId":"5f6e72bc-b63c-411e-a697-424762f1db46","layout":{"x":0,"y":20,"width":19,"height":10},"queryRef":{"kind":"query","queryId":"8e8323ea-5018-4e02-9c1f-d95cf7029970"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilter":[],"crossFilterDisabled":false,"drillthroughDisabled":false,"drillthrough":[]}}],"baseQueries":[],"parameters":[{"kind":"duration","id":"874b3290-58fd-4bdd-b329-35b4e8e1c19d","displayName":"Time range","description":"","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}},{"kind":"string","id":"423f997a-2b03-4581-9016-c9ce23933112","displayName":"FlowID","description":"specific flow id ","variableName":"pFlowID","selectionType":"scalar","includeAllOption":false,"defaultValue":{"kind":"no-selection"},"dataSource":{"kind":"query","columns":{"value":"FlowId","label":"FlowId"},"queryRef":{"kind":"query","queryId":"3a371fab-c6d5-46e6-a5a7-9f2c39d00df1"}},"showOnPages":{"kind":"all"}},{"kind":"string","id":"a99f2d38-4647-40a9-80ce-cdd43ff40073","displayName":"Flow Run ID","description":"Flow Run ID is operation ID from parent requests entity  ","variableName":"pFlowRunID","selectionType":"scalar","includeAllOption":false,"defaultValue":{"kind":"no-selection"},"dataSource":{"kind":"query","columns":{"value":"operation_ParentId"},"queryRef":{"kind":"query","queryId":"ba5e3045-4be8-43a8-89b0-0cbd86be2485"}},"showOnPages":{"kind":"all"}}],"dataSources":[{"id":"06698ae1-f952-41e3-a827-bca69606bd5b","kind":"manual-kusto","scopeId":"kusto","name":"FastTrack App Insight ","clusterUri":"https://ade.applicationinsights.io/subscriptions/<Subscription-ID>","database":"Dynamics365AppInsights"}],"pages":[{"name":"Performance Monitoring","id":"5f6e72bc-b63c-411e-a697-424762f1db46"},{"name":"Errors and Exceptions","id":"bcf7dbb2-ca0b-46ba-933d-f526c4d0b804"}],"queries":[{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"requests\n| where customDimensions['resourceProvider'] == 'Cloud Flow'\n| extend cd = parse_json(tostring(customDimensions[\"Data\"]))\n| distinct FlowDisplayName = tostring(cd.FlowDisplayName), FlowId=tostring(customDimensions['resourceId'])\n\n","id":"93aadea8-8578-4253-a27b-cbae95ee897b","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"//Step 2: Get All runs of specific flow \nrequests \n| where customDimensions.resourceProvider == 'Cloud Flow'\n| extend data = todynamic(tostring(customDimensions.Data))\n| project timestamp, operation_ParentId, success, duration, customDimensions.signalCategory, name, data.FlowDisplayName, data.tags.xrmWorkflowId , data.tags.createdBy, directlink=strcat(\"https://make.powerautomate.com/environments/\", data.tags.environmentName, \"/flows/\",  name, \"/runs/\", operation_Id)\n//data, customDimensions, \n| where name == pFlowID and success == true\n| where operation_ParentId == pFlowRunID\n| sort by duration desc \n","id":"5b09dbcb-b32c-4288-874c-491dc7c02ec8","usedVariables":["pFlowID","pFlowRunID"]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"dependencies\n| where customDimensions.resourceProvider == \"Cloud Flow\"\n| where customDimensions.error !contains \"skipped\"\n| where customDimensions.signalCategory == 'Cloud flow actions'\n| where operation_ParentId == pFlowRunID\n//| summarize by timestamp, name, target, resultCode, duration, performanceBucket, operation_Name, operation_ParentId\n| summarize by duration, name, timestamp\n| sort by timestamp\n| render timechart  \n\n","id":"78103155-bde5-41b3-94ff-ef4f7504445c","usedVariables":["pFlowRunID"]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"requests\n| extend cd = parse_json(customDimensions)\n| where cd.resourceProvider has \"Cloud Flow\"\n| extend data = parse_json(tostring(cd.Data))\n| extend FlowName = tostring(data.FlowDisplayName)\n|summarize nRun = count(), nFailed = countif(success==false) by FlowName\n| extend nSuccess = nRun-toint(nFailed)\n| project FlowName, nRun,nSuccess,nFailed\n| order by toint(nRun) desc\n","id":"4912c0e5-cdb6-44fc-9ba1-f7159e6e53ff","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"dependencies\n| where type == \"Cloud Flow/Cloud flow triggers\"\n| summarize count() by name","id":"8c9c7ba9-08b2-4676-8282-266d468d587b","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"requests \n| where customDimensions.resourceProvider == 'Cloud Flow'\n| extend data = todynamic(tostring(customDimensions.Data))\n| summarize count() by resultCode, bin(timestamp, 7d)\n| render columnchart","id":"8dd68bcb-814e-4bc0-abc5-bcf12b3971b8","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"requests \n| where customDimensions.resourceProvider == 'Cloud Flow'\n| extend data = todynamic(tostring(customDimensions.Data))\n| summarize count() by resultCode, bin(timestamp, 30d)\n| render columnchart ","id":"4c01e625-4b05-4610-b848-9650f36b1986","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":" //Get Actions of specific Flow Run \ndependencies\n| where customDimensions.resourceProvider == \"Cloud Flow\"\n| where customDimensions.error !contains \"skipped\"\n| where customDimensions.signalCategory == 'Cloud flow actions'\n| where operation_ParentId == pFlowRunID","id":"ff8c55ad-f58d-4960-8e0f-599ddcd85a25","usedVariables":["pFlowRunID"]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":" //Get Actions of specific Flow Run \ndependencies\n| where customDimensions.resourceProvider == \"Cloud Flow\"\n| where customDimensions.error !contains \"skipped\"\n| where customDimensions.signalCategory == 'Cloud flow actions'\n| where operation_ParentId == pFlowRunID\n| summarize count() by resultCode, bin(timestamp, 30d)\n| render columnchart ","id":"59cad399-adaf-4b43-bc3f-2a16bd3136d1","usedVariables":["pFlowRunID"]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"// Please enter your KQL query (Example):\nrequests\n| where customDimensions ['resourceProvider'] == 'Cloud Flow'\n| where customDimensions ['signalCategory'] == 'Cloud flow runs'\n| where success == 'False'\n//| limit 10 ","id":"e497200f-72de-4485-acf6-711056ef02b1","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"dependencies\n| where customDimensions.resourceProvider == \"Cloud Flow\"\n| where customDimensions.signalCategory == 'Cloud flow actions'\n//| where operation_ParentId == pFlowRunID\n| where success == 'False'\n","id":"6857dbf5-960c-4721-909e-38eb5a226766","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"dependencies\n| where customDimensions.resourceProvider == \"Cloud Flow\"\n| where customDimensions.error !contains \"skipped\"\n| where customDimensions.signalCategory == 'Cloud flow triggers'\n| where operation_ParentId == pFlowRunID","id":"b54ed617-ab9a-46e1-a82b-10738a38fa54","usedVariables":["pFlowRunID"]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"dependencies\n| where customDimensions.resourceProvider == \"Cloud Flow\"\n//| where customDimensions.error !contains \"skipped\"\n| where customDimensions.signalCategory == 'Cloud flow triggers'\n| where operation_ParentId == pFlowRunID\n| where success == 'False'","id":"19d401d7-01c8-409d-bc98-71cd25eef601","usedVariables":["pFlowRunID"]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"requests\n| where timestamp > ago(30d)  // Filter for the last 30 days\n| extend cd = parse_json(customDimensions)\n| where cd.resourceProvider has \"Cloud Flow\"\n| extend Day = startofday(timestamp)  // Extract the day for grouping\n| summarize\n    nFailed = countif(success == false),\n    nSuccess = countif(success == true)\n    by Day\n| order by Day asc\n| render barchart kind=stacked","id":"8e8323ea-5018-4e02-9c1f-d95cf7029970","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | take 100\nrequests\n| where customDimensions['resourceProvider'] == 'Cloud Flow'\n| extend cd = parse_json(tostring(customDimensions[\"Data\"]))\n| distinct FlowDisplayName = tostring(cd.FlowDisplayName), FlowId=tostring(customDimensions['resourceId'])","id":"3a371fab-c6d5-46e6-a5a7-9f2c39d00df1","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"06698ae1-f952-41e3-a827-bca69606bd5b"},"text":"requests \n| where customDimensions.resourceProvider == 'Cloud Flow'\n| extend data = todynamic(tostring(customDimensions.Data))\n| project timestamp, operation_ParentId, name\n| where name == pFlowID\n| distinct operation_ParentId \n\n","id":"ba5e3045-4be8-43a8-89b0-0cbd86be2485","usedVariables":["pFlowID"]}]}